<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ç’€ç’¨ä¹‹è·¯</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
min-height:100vh;
overflow-x:hidden;
background:linear-gradient(
135deg,
#4ab7cc 0%,
#79cbd8 25%,
#b7dbe3 50%,
#e4cddc 75%,
#f2b3c6 100%
);
background-attachment:fixed;
}

/* ğŸŒ¸ ç²’å­canvas */
#particleCanvas{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
z-index:0;
pointer-events:none;
}

/* ğŸŒ¸ ä¸»å¸ƒå±€ */
.layout{
position:relative;
z-index:1;
display:flex;
height:100vh;
}

.sidebar{
width:240px;
padding:20px;
background:rgba(255,255,255,0.18);
backdrop-filter:blur(12px);
border-radius:20px;
margin:20px;
overflow-y:auto;
color:white;
font-size:14px;
}

.sidebar div{
margin:6px 0;
padding:6px 10px;
border-radius:12px;
cursor:pointer;
transition:all 0.3s;
}

.sidebar div:hover{
background:rgba(255,255,255,0.3);
transform:translateX(4px);
}

.main{
flex:1;
padding:30px;
overflow-y:auto;
}

/* ğŸŒ¸ æ ‡é¢˜ */
.glow-title{
text-align:center;
font-size:52px;
font-weight:800;
margin-bottom:40px;
letter-spacing:14px;
position:relative;
}

.glow-title span{
display:inline-block;
background:linear-gradient(
90deg,
#4ab7cc,
#79cbd8,
#f2b3c6,
#ff9ad5,
#4ab7cc
);
background-size:300%;
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
animation:
gradientMove 6s linear infinite,
glow 3s ease-in-out infinite alternate;
}

@keyframes gradientMove{
0%{background-position:0%;}
100%{background-position:300%;}
}

@keyframes glow{
from{
text-shadow:
0 0 5px rgba(255,255,255,0.6),
0 0 15px rgba(255,182,230,0.6);
}
to{
text-shadow:
0 0 20px rgba(255,255,255,0.9),
0 0 40px rgba(255,182,230,0.9);
}
}

/* ğŸŒ¸ ç•™è¨€å¡ç‰‡ */
.card{
background:rgba(255,255,255,0.28);
backdrop-filter:blur(15px);
padding:20px;
border-radius:20px;
margin-bottom:20px;
color:white;
box-shadow:0 8px 25px rgba(0,0,0,0.15);
transition:all 0.3s;
}

.card:hover{
transform:translateY(-4px);
box-shadow:0 15px 35px rgba(0,0,0,0.2);
}

.nickname{
color:#ffb6e6;
font-weight:bold;
margin-bottom:8px;
}

.date{
opacity:0.8;
font-size:13px;
margin-bottom:6px;
}
</style>
</head>

<body>

<canvas id="particleCanvas"></canvas>

<div class="layout">

<div class="sidebar" id="dateIndex">åŠ è½½ä¸­...</div>

<div class="main">

<h1 class="glow-title" id="mainTitle">
<span>ç’€</span>
<span>ç’¨</span>
<span>ä¹‹</span>
<span>è·¯</span>
</h1>

<div id="commentsContainer"></div>

</div>
</div>

<script>

/* ğŸŒ¸ ç²’å­é è¿‘æ ‡é¢˜å˜äº® */

const canvas = document.getElementById("particleCanvas");
const ctx = canvas.getContext("2d");

function resize(){
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

const title = document.getElementById("mainTitle");

let particles = [];

for(let i=0;i<80;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
r:Math.random()*3+1,
dx:(Math.random()-0.5)*0.5,
dy:(Math.random()-0.5)*0.5
});
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

const rect = title.getBoundingClientRect();

particles.forEach(p=>{

let near =
p.x > rect.left-100 &&
p.x < rect.right+100 &&
p.y > rect.top-100 &&
p.y < rect.bottom+100;

ctx.beginPath();
ctx.arc(p.x,p.y, near ? p.r*2 : p.r ,0,Math.PI*2);

ctx.fillStyle = near ?
"rgba(255,255,255,0.9)" :
(Math.random()>0.5 ?
"rgba(255,255,255,0.4)" :
"rgba(255,182,230,0.4)");

ctx.fill();

p.x += p.dx;
p.y += p.dy;

if(p.x<0||p.x>canvas.width)p.dx*=-1;
if(p.y<0||p.y>canvas.height)p.dy*=-1;

});

requestAnimationFrame(draw);
}

draw();

/* ğŸŒ¸ ç•™è¨€ç³»ç»Ÿ */

async function loadDiary(){
try{
const res=await fetch("diary.json?"+Date.now())
const data=await res.json()
render(data.reverse())
}catch(e){
document.getElementById("dateIndex").innerHTML="æš‚æ— ç•™è¨€æ•°æ®"
}
}

function render(data){
const container=document.getElementById("commentsContainer")
const index=document.getElementById("dateIndex")

container.innerHTML=""
index.innerHTML=""

const grouped={}

data.forEach(item=>{
const [year,month,day]=item.date.split("-")
if(!grouped[year]) grouped[year]={}
if(!grouped[year][month]) grouped[year][month]={}
if(!grouped[year][month][day]) grouped[year][month][day]=[]
grouped[year][month][day].push(item)
})

for(const y in grouped){

const yDiv=document.createElement("div")
yDiv.innerHTML="â–¶ "+y
yDiv.style.fontWeight="bold"
index.appendChild(yDiv)

const yearBlock=document.createElement("div")
yearBlock.style.display="none"
yearBlock.style.marginLeft="10px"
index.appendChild(yearBlock)

yDiv.onclick=()=>{
yearBlock.style.display=
yearBlock.style.display==="none"?"block":"none"
}

for(const m in grouped[y]){

const mDiv=document.createElement("div")
mDiv.innerHTML="â–¶ "+m
yearBlock.appendChild(mDiv)

const monthBlock=document.createElement("div")
monthBlock.style.display="none"
monthBlock.style.marginLeft="10px"
yearBlock.appendChild(monthBlock)

mDiv.onclick=()=>{
monthBlock.style.display=
monthBlock.style.display==="none"?"block":"none"
}

for(const d in grouped[y][m]){

const dDiv=document.createElement("div")
dDiv.innerHTML=d
monthBlock.appendChild(dDiv)

dDiv.onclick=()=>{
container.innerHTML=""
grouped[y][m][d].forEach(item=>{
createCard(container,item)
})
}
}
}
}

renderAll(data)
}

function renderAll(data){
const container=document.getElementById("commentsContainer")
container.innerHTML=""
data.forEach(item=>{
createCard(container,item)
})
}

function createCard(container,item){
const card=document.createElement("div")
card.className="card"
card.innerHTML=`
<div class="nickname">${item.nickname}</div>
<div class="date">${item.date}</div>
<div>${item.content}</div>
`
container.appendChild(card)
}

setInterval(loadDiary,30000)
loadDiary()

</script>

</body>
</html>
