<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>å¹¸ç¦æ—¶åˆ»</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",sans-serif;
min-height:100vh;
overflow-x:hidden;

/* ğŸŒ¸ å’Œ news.html å®Œå…¨ä¸€è‡´çš„æ¸å˜ */
background:linear-gradient(
  135deg,
  #4ab7cc 0%,
  #79cbd8 25%,
  #b7dbe3 50%,
  #e4cddc 75%,
  #f2b3c6 100%
);
background-attachment:fixed;
}

/* ğŸŒ¸ ç²’å­å±‚ï¼ˆå’Œ news ä¸€æ ·ï¼‰ */
.particles{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
pointer-events:none;
overflow:hidden;
z-index:0;
}

.particle{
position:absolute;
border-radius:50%;
opacity:0.4;
animation:float linear infinite;
}

@keyframes float{
from{transform:translateY(100vh) scale(1);}
to{transform:translateY(-10vh) scale(1.2);}
}

/* ä¸»å¸ƒå±€ */
.layout{
position:relative;
z-index:1;
display:flex;
height:100vh;
}

/* å·¦ä¾§å¯¼èˆª */
.sidebar{
width:240px;
padding:20px;
background:rgba(255,255,255,0.18);
backdrop-filter:blur(12px);
border-radius:20px;
margin:20px;
overflow-y:auto;
color:white;
font-size:14px;
}

.sidebar div{
margin:6px 0;
padding:6px 10px;
border-radius:12px;
cursor:pointer;
transition:all 0.3s;
}

.sidebar div:hover{
background:rgba(255,255,255,0.3);
transform:translateX(4px);
}

/* å³ä¾§ç•™è¨€åŒºåŸŸ */
.main{
flex:1;
padding:30px;
overflow-y:auto;
}

/* ç•™è¨€å¡ç‰‡ */
.card{
background:rgba(255,255,255,0.28);
backdrop-filter:blur(15px);
padding:20px;
border-radius:20px;
margin-bottom:20px;
color:white;
box-shadow:0 8px 25px rgba(0,0,0,0.15);
transition:all 0.3s;
}

.card:hover{
transform:translateY(-4px);
box-shadow:0 15px 35px rgba(0,0,0,0.2);
}

.nickname{
color:#ffb6e6;
font-weight:bold;
margin-bottom:8px;
}

.date{
opacity:0.8;
font-size:13px;
margin-bottom:6px;
}
</style>
</head>

<body>

<!-- ğŸŒ¸ ç²’å­å®¹å™¨ -->
<div class="particles" id="particles"></div>

<div class="layout">

<div class="sidebar" id="dateIndex">
åŠ è½½ä¸­...
</div>

<div class="main">
<div id="commentsContainer"></div>
</div>

</div>
<footer style="text-align:center;font-size:13px;color:#eee;padding:30px 0;position:relative;z-index:1;">
Â© 2026 LUMU
</footer>
<script>

/* ğŸŒ¸ ç”Ÿæˆå’Œ news ä¸€æ ·çš„æ¼‚æµ®ç²’å­ */
const particleContainer = document.getElementById("particles");

for(let i=0;i<25;i++){
  const p = document.createElement("div");
  p.className="particle";

  const size = Math.random()*8+4;
  p.style.width=size+"px";
  p.style.height=size+"px";
  p.style.left=Math.random()*100+"%";
  p.style.background = Math.random()>0.5 ? "#ffffff" : "#ffd1ec";
  p.style.animationDuration = (Math.random()*15+10)+"s";
  p.style.animationDelay = Math.random()*10+"s";

  particleContainer.appendChild(p);
}

/* è¯»å– diary.json */
async function loadDiary(){
try{
const res=await fetch("diary.json?"+Date.now())
const data=await res.json()
render(data)
}catch(e){
document.getElementById("dateIndex").innerHTML="æš‚æ— ç•™è¨€æ•°æ®"
}
}

function render(data){
const container=document.getElementById("commentsContainer")
const index=document.getElementById("dateIndex")

container.innerHTML=""
index.innerHTML=""

const grouped={}

data.forEach(item=>{
const [year,month,day]=item.date.split("-")

if(!grouped[year]) grouped[year]={}
if(!grouped[year][month]) grouped[year][month]={}
if(!grouped[year][month][day]) grouped[year][month][day]=[]

grouped[year][month][day].push(item)
})

for(const y in grouped){

const yDiv=document.createElement("div")
yDiv.innerHTML="â–¶ "+y
yDiv.style.fontWeight="bold"
index.appendChild(yDiv)

const yearBlock=document.createElement("div")
yearBlock.style.display="none"
yearBlock.style.marginLeft="10px"
index.appendChild(yearBlock)

yDiv.onclick=()=>{
yearBlock.style.display=
yearBlock.style.display==="none"?"block":"none"
}

for(const m in grouped[y]){

const mDiv=document.createElement("div")
mDiv.innerHTML="â–¶ "+m
yearBlock.appendChild(mDiv)

const monthBlock=document.createElement("div")
monthBlock.style.display="none"
monthBlock.style.marginLeft="10px"
yearBlock.appendChild(monthBlock)

mDiv.onclick=()=>{
monthBlock.style.display=
monthBlock.style.display==="none"?"block":"none"
}

for(const d in grouped[y][m]){

const dDiv=document.createElement("div")
dDiv.innerHTML=d
monthBlock.appendChild(dDiv)

dDiv.onclick=()=>{
container.innerHTML=""
grouped[y][m][d].forEach(item=>{
createCard(container,item)
})
}
}
}
}

renderAll(data)
}

function renderAll(data){
const container=document.getElementById("commentsContainer")
container.innerHTML=""
data.forEach(item=>{
createCard(container,item)
})
}

function createCard(container,item){
const card=document.createElement("div")
card.className="card"
card.innerHTML=`
<div class="nickname">${item.nickname}</div>
<div class="date">${item.date}</div>
<div>${item.content}</div>
`
container.appendChild(card)
}

setInterval(loadDiary,30000)
loadDiary()

</script>

</body>
</html>
